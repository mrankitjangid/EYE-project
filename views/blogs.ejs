<section id="blogs-container" class="p-4 lg:p-8">
    <div class="flex justify-between items-center flex-wrap w-full bg-slate-700">
        <div class="text-4xl px-20 py-8 font-bold">Blog</div>
        <div class="border rounded-[1.5rem] min-w-10 md:max-w-[50%] w-full h-13 m-8 content-center">
            <form action="blogs?key=${key}">
                <label for="search" class="border-none"></label>
                <input type="text" name="key"
                    class="px-4 md:px-8 bg-transparent w-full h-12 rounded-[1.5rem] border-transparent"
                    placeholder="Search">
                <label class="absolute content-center h-12 w-24 -ml-24 rounded-full hover:bg-white hover:bg-opacity-20">
                    <div class="flex justify-center items-center">
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                    <input type="submit" class="hidden">
                </label>

            </form>
        </div>
    </div>
    <div class="lg:grid lg:grid-cols-3 xl:grid-cols-9 lg:gap-8 py-4 lg:p-8">
        <div class="blog-content lg:col-span-2 xl:col-span-6">
            <% if( blogs.length==0 ) { %>
                <p class="w-full flex justify-center">No Search Results Found</p>
            <% } else { %>
                <ul class="flex flex-col gap-4 items-center w-full">
                    <% for( let i=0; i < blogs.length; i++ ) { %>
                        <li class="bg-slate-900 max-w-sm md:max-w-7xl rounded-3xl overflow-hidden shadow-slate-500 shadow-sm">
                            <div class="md:flex w-auto xl:max-h-60">
                                <!-- blog list thumbnail -->
                                <div class="blog-thumbnail object-contain aspect-square md:max-w-[40%]">
                                    <img class="w-full md:min-h-48 md:min-w-48 object-cover aspect-square" src="<%- blogs[i].blogImg %>" alt="blog-thumbnail" width="100%" height="100%">
                                </div>
                                <!-- blog list title and description -->
                                <div class="p-4">
                                    <div class="blog-title text-md font-semibold">
                                        <a href="/blog/<%- blogs[i].uploadId %>" class=" text-xl"><%- blogs[i].blogTitle %></a>
                                    </div>
                                    <div class="blog-description mt-1"><%- blogs[i].description %></div>
                                </div>
                            </div>
                        </li>
                    <% } %>
                </ul>
            <% } %>
        </div>
        <div class="sidebar md:col-span-1 xl:col-span-3">
            <div class="filter-container bg-slate-900 p-8">
                <div class="uppercase font-bold pb-1">Applied Filters</div>
                <ul class="flex flex-col flex-grow gap-4 m-4 list-none">
                    <% for( let i = 0; i < filters.length; i++ ) { %>
                        <% curr_url = curr_url.replace('&&', '&') %>
                        <% curr_url = curr_url.replace('?&', '?') %>
                        <li><a href="<%= url.includes(`&t={filters[i][1]}`)? curr_url.replace(`&t=${filters[i][1]}`,''): curr_url.replace(`t=${filters[i][1]}`,'') %>" class="border rounded-full px-2 py-1 my-1"><%= filters[i][0] %> <i class="fa-solid fa-xmark"></i></a></li>
                    <% } %>
                </ul>
            </div>
            <div class="tags-container bg-slate-900 p-8 mt-8">
                <div class="uppercase font-bold pb-1">Topics</div>
                <ul class="flex flex-col flex-grow list-none">
                    <% for( let i=0; i < tags.length; i++ ) { %>
                        <% if( url.includes(`t=${i}`)) {%>
                            <li><a class="block underline ml-4" href="<%= url.includes('page=')? url.substr(0, url.length - 7): url.substr(0, url.length - 3) %>"><%= tags[i] %></a></li>
                        <% } else {%>
                            <li><a class="block underline ml-4" href="<%= url %><%= i %>"><%= tags[i] %></a></li>
                    <% }}; %>
                </ul>
            </div>
        </div>
    </div>
    <% url = url.substr(0, url.length - 2) %>
    <div class="w-full flex justify-center p-8">
        <% if( hasPrev ) { %>
            <a href="<%= url %>page=<%= currPage - 1 %>" id="prev-page"><i class="fa-solid fa-angles-left"></i> Previous</a>
        <% } %>
        <a href="/blogs?page=<%= currPage %>" id="prev-page">Page <%= currPage %></a>
        <% if ( hasNext ) { %>
            <a href="<%= url %>page=<%= currPage + 1 %>" id="next-page">Next <i class="fa-solid fa-angles-right"></i></a>
        <% } %>
    </div>
</section>